<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_51) on Mon Apr 17 20:31:30 CST 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SourceFunction (flink-streaming-java 1.1.4 API)</title>
<meta name="date" content="2017-04-17">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SourceFunction (flink-streaming-java 1.1.4 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/SourceFunction.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SocketTextStreamFunction.html" title="org.apache.flink.streaming.api.functions.source中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/flink/streaming/api/functions/source/SourceFunction.html" target="_top">框架</a></li>
<li><a href="SourceFunction.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.flink.streaming.api.functions.source</div>
<h2 title="接口 SourceFunction" class="title">接口 SourceFunction&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">类型参数:</span></dt>
<dd><code>T</code> - The type of the elements produced by this source.</dd>
</dl>
<dl>
<dt>所有超级接口:</dt>
<dd>org.apache.flink.api.common.functions.Function, <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html?is-external=true" title="java.io中的类或接口">Serializable</a></dd>
</dl>
<dl>
<dt>所有已知子接口:</dt>
<dd><a href="../../../../../../../org/apache/flink/streaming/api/functions/source/ParallelSourceFunction.html" title="org.apache.flink.streaming.api.functions.source中的接口">ParallelSourceFunction</a>&lt;OUT&gt;</dd>
</dl>
<dl>
<dt>所有已知实现类:</dt>
<dd><a href="../../../../../../../org/apache/flink/streaming/api/functions/source/ConnectorSource.html" title="org.apache.flink.streaming.api.functions.source中的类">ConnectorSource</a>, <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/ContinuousFileMonitoringFunction.html" title="org.apache.flink.streaming.api.functions.source中的类">ContinuousFileMonitoringFunction</a>, <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/FileMonitoringFunction.html" title="org.apache.flink.streaming.api.functions.source中的类">FileMonitoringFunction</a>, <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/FromElementsFunction.html" title="org.apache.flink.streaming.api.functions.source中的类">FromElementsFunction</a>, <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/FromIteratorFunction.html" title="org.apache.flink.streaming.api.functions.source中的类">FromIteratorFunction</a>, <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/FromSplittableIteratorFunction.html" title="org.apache.flink.streaming.api.functions.source中的类">FromSplittableIteratorFunction</a>, <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/InputFormatSourceFunction.html" title="org.apache.flink.streaming.api.functions.source中的类">InputFormatSourceFunction</a>, <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/MessageAcknowledgingSourceBase.html" title="org.apache.flink.streaming.api.functions.source中的类">MessageAcknowledgingSourceBase</a>, <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/MultipleIdsMessageAcknowledgingSourceBase.html" title="org.apache.flink.streaming.api.functions.source中的类">MultipleIdsMessageAcknowledgingSourceBase</a>, <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/RichParallelSourceFunction.html" title="org.apache.flink.streaming.api.functions.source中的类">RichParallelSourceFunction</a>, <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/RichSourceFunction.html" title="org.apache.flink.streaming.api.functions.source中的类">RichSourceFunction</a>, <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SocketTextStreamFunction.html" title="org.apache.flink.streaming.api.functions.source中的类">SocketTextStreamFunction</a>, <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/StatefulSequenceSource.html" title="org.apache.flink.streaming.api.functions.source中的类">StatefulSequenceSource</a></dd>
</dl>
<hr>
<br>
<pre>@Public
public interface <span class="typeNameLabel">SourceFunction&lt;T&gt;</span>
extends org.apache.flink.api.common.functions.Function, <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html?is-external=true" title="java.io中的类或接口">Serializable</a></pre>
<div class="block">Base interface for all stream data sources in Flink. The contract of a stream source
 is the following: When the source should start emitting elements, the <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.html#run-org.apache.flink.streaming.api.functions.source.SourceFunction.SourceContext-"><code>run(org.apache.flink.streaming.api.functions.source.SourceFunction.SourceContext&lt;T&gt;)</code></a> method
 is called with a <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口"><code>SourceFunction.SourceContext</code></a> that can be used for emitting elements.
 The run method can run for as long as necessary. The source must, however, react to an
 invocation of <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.html#cancel--"><code>cancel()</code></a> by breaking out of its main loop.

 <h3>Checkpointed Sources</h3>

 <p>Sources that also implement the <a href="../../../../../../../org/apache/flink/streaming/api/checkpoint/Checkpointed.html" title="org.apache.flink.streaming.api.checkpoint中的接口"><code>Checkpointed</code></a>
 interface must ensure that state checkpointing, updating of internal state and emission of
 elements are not done concurrently. This is achieved by using the provided checkpointing lock
 object to protect update of state and emission of elements in a synchronized block.

 <p>This is the basic pattern one should follow when implementing a (checkpointed) source:

 <pre><code>
  public class ExampleSource&lt;T&gt; implements SourceFunction&lt;T&gt;, Checkpointed&lt;Long&gt; {
      private long count = 0L;
      private volatile boolean isRunning = true;

      public void run(SourceContext&lt;T&gt; ctx) {
          while (isRunning &amp;&amp; count &lt; 1000) {
              synchronized (ctx.getCheckpointLock()) {
                  ctx.collect(count);
                  count++;
              }
          }
      }

      public void cancel() {
          isRunning = false;
      }

      public Long snapshotState(long checkpointId, long checkpointTimestamp) { return count; }

      public void restoreState(Long state) { this.count = state; }
 }
 </code></pre>


 <h3>Timestamps and watermarks:</h3>
 
 Sources may assign timestamps to elements and may manually emit watermarks.
 However, these are only interpreted if the streaming program runs on 
 <a href="../../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#EventTime"><code>TimeCharacteristic.EventTime</code></a>. On other time characteristics 
 (<a href="../../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#IngestionTime"><code>TimeCharacteristic.IngestionTime</code></a> and <a href="../../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html#ProcessingTime"><code>TimeCharacteristic.ProcessingTime</code></a>),
 the watermarks from the source function are ignored.

 <h3>Gracefully Stopping Functions</h3>
 
 Functions may additionally implement the <code>StoppableFunction</code>
 interface. "Stopping" a function, in contrast to "canceling" means a graceful exit that leaves the
 state and the emitted elements in a consistent state.
 
 <p>When a source is stopped, the executing thread is not interrupted, but expected to leave the
 <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.html#run-org.apache.flink.streaming.api.functions.source.SourceFunction.SourceContext-"><code>run(SourceContext)</code></a> method in reasonable time on its own, preserving the atomicity
 of state updates and element emission.</div>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><code>StoppableFunction</code>, 
<a href="../../../../../../../org/apache/flink/streaming/api/TimeCharacteristic.html" title="org.apache.flink.streaming.api中的枚举"><code>TimeCharacteristic</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>嵌套类概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="嵌套类概要表, 列表嵌套类和解释">
<caption><span>嵌套类</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">接口和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口">SourceFunction.SourceContext</a>&lt;<a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="SourceFunction.SourceContext中的类型参数">T</a>&gt;</span></code>
<div class="block">Interface that source functions use to emit elements, and possibly watermarks.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.html#cancel--">cancel</a></span>()</code>
<div class="block">Cancels the source.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.html#run-org.apache.flink.streaming.api.functions.source.SourceFunction.SourceContext-">run</a></span>(<a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口">SourceFunction.SourceContext</a>&lt;<a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.html" title="SourceFunction中的类型参数">T</a>&gt;&nbsp;ctx)</code>
<div class="block">Starts the source.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="run-org.apache.flink.streaming.api.functions.source.SourceFunction.SourceContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>void&nbsp;run(<a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口">SourceFunction.SourceContext</a>&lt;<a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.html" title="SourceFunction中的类型参数">T</a>&gt;&nbsp;ctx)
  throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="java.lang中的类或接口">Exception</a></pre>
<div class="block">Starts the source. Implementations can use the <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口"><code>SourceFunction.SourceContext</code></a> emit
 elements.
 
 <p>Sources that implement <a href="../../../../../../../org/apache/flink/streaming/api/checkpoint/Checkpointed.html" title="org.apache.flink.streaming.api.checkpoint中的接口"><code>Checkpointed</code></a>
 must lock on the checkpoint lock (using a synchronized block) before updating internal
 state and emitting elements, to make both an atomic operation:

 <pre><code>
  public class ExampleSource&lt;T&gt; implements SourceFunction&lt;T&gt;, Checkpointed&lt;Long&gt; {
      private long count = 0L;
      private volatile boolean isRunning = true;

      public void run(SourceContext&lt;T&gt; ctx) {
          while (isRunning &amp;&amp; count &lt; 1000) {
              synchronized (ctx.getCheckpointLock()) {
                  ctx.collect(count);
                  count++;
              }
          }
      }

      public void cancel() {
          isRunning = false;
      }

      public Long snapshotState(long checkpointId, long checkpointTimestamp) { return count; }

      public void restoreState(Long state) { this.count = state; }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>ctx</code> - The context to emit elements to and for accessing locks.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="java.lang中的类或接口">Exception</a></code></dd>
</dl>
</li>
</ul>
<a name="cancel--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>cancel</h4>
<pre>void&nbsp;cancel()</pre>
<div class="block">Cancels the source. Most sources will have a while loop inside the
 <a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.html#run-org.apache.flink.streaming.api.functions.source.SourceFunction.SourceContext-"><code>run(SourceContext)</code></a> method. The implementation needs to ensure that the
 source will break out of that loop after this method is called.
 
 <p>A typical pattern is to have an <code>"volatile boolean isRunning"</code> flag that is set to
 <code>false</code> in this method. That flag is checked in the loop condition.
 
 <p>When a source is canceled, the executing thread will also be interrupted
 (via <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#interrupt--" title="java.lang中的类或接口"><code>Thread.interrupt()</code></a>). The interruption happens strictly after this
 method has been called, so any interruption handler can rely on the fact that
 this method has completed. It is good practice to make any flags altered by
 this method "volatile", in order to guarantee the visibility of the effects of
 this method to any interruption handler.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/SourceFunction.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SocketTextStreamFunction.html" title="org.apache.flink.streaming.api.functions.source中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../../../org/apache/flink/streaming/api/functions/source/SourceFunction.SourceContext.html" title="org.apache.flink.streaming.api.functions.source中的接口"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/flink/streaming/api/functions/source/SourceFunction.html" target="_top">框架</a></li>
<li><a href="SourceFunction.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2014&#x2013;2017 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
